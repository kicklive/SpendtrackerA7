<div style="height: 25px;">&nbsp;</div>
<div>
    <div fxLayout fxLayout.xs="column" fxLayoutWrap fxLayoutGap="0.5%">
        <div fxFlex=50% fxFlexAlign="left" fxLayoutAlign="end stretch"><b>Budget Dates:</b>
        </div>
        <div fxFlex=50% fxFlexAlign="left" fxLayoutAlign="start stretch">{{budgetDetails?.BudgetStartDate|date:shortDate}} to {{budgetDetails?.BudgetEndDate|date:shortDate}}</div>
    </div>
    <div fxLayout fxLayout.xs="column" fxLayoutWrap fxLayoutAlign="start stretch" fxLayoutGap="0.5%">
        <div fxFlex=50% fxFlexAlign="left" fxLayoutAlign="end stretch"><b>Days Left in Budget:</b></div>
        <div fxFlex=50% fxFlexAlign="left">{{findDiff(budgetDetails)}}</div>
    </div>
    <div fxLayout fxLayout.xs="column" fxLayoutWrap fxLayoutAlign="start stretch" fxLayoutGap="0.5%">
        <div fxFlex=50% fxFlexAlign="left" fxLayoutAlign="end stretch"><b>Budget Amount:</b></div>
        <div fxFlex=50% fxFlexAlign="left">{{budgetDetails?.BudgetAmount|currency:'USD':'symbol':'1.2-2'}}
        </div>
    </div>

    <div fxLayout fxLayout.xs="column" fxLayoutWrap fxLayoutAlign="start stretch" fxLayoutGap="0.5%">
        <div fxFlex=50% fxFlexAlign="left" fxLayoutAlign="end stretch"><b>Budget Status:</b></div>
        <div fxFlex=50% fxFlexAlign="left">{{budgetDetails?.BudgetStatus}}</div>
    </div>

    <div fxLayout fxLayout.xs="column" fxLayoutWrap fxLayoutAlign="start stretch" fxLayoutGap="0.5%">
        <div fxFlex=50% fxFlexAlign="left" fxLayoutAlign="end stretch"><b>Budget Type:</b></div>
        <div fxFlex=50% fxFlexAlign="left">{{budgetDetails?.BudgetType}}</div>
    </div>
    <div style="height: 25px;">&nbsp;</div>
</div>
<div class="transactioncontainter">
    <hr style="height:3px;border:none;color:#333;background-color:#333;">
    <h3>Transactions</h3>
    <div style="height:20px"></div>
</div>

<div>
        <div class="grid-container-data" *ngIf="hasTransactions">
                <table mat-table [dataSource]="budgetDetails.Transactions" class="example-container mat-elevation-z8">
                    <ng-container matColumnDef="transdate">
                        <th mat-header-cell *matHeaderCellDef>Transaction Date</th>
                        <td mat-cell *matCellDef="let item">{{item.transdate|date:shortDate}}</td>
                    </ng-container>
                    <ng-container matColumnDef="upc">
                        <th mat-header-cell *matHeaderCellDef>UPC</th>
                        <td mat-cell *matCellDef="let item"><span style="cursor: pointer;color:blue" *ngIf="show" (click)="showTransDetails('/edittransaction',item._id)">
                            {{item.upc}}</span><span *ngIf="!show">{{item.upc}}</span></td>
                    </ng-container>
                    <ng-container matColumnDef="itemprice">
                        <th mat-header-cell *matHeaderCellDef>Amount</th>
                        <td mat-cell *matCellDef="let item">{{item.itemprice}}</td>
                    </ng-container>
                    <ng-container matColumnDef="itemdescription">
                        <th mat-header-cell *matHeaderCellDef>Item Description</th>
                        <td mat-cell *matCellDef="let item">{{item.itemdescription}}</td>
                    </ng-container>
                    <ng-container matColumnDef="store">
                        <th mat-header-cell *matHeaderCellDef>Store</th>
                        <td mat-cell *matCellDef="let item">{{item.store}}</td>
                    </ng-container>
                   
                    <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky:true">
                    </tr>
                    <tr mat-row *matRowDef="let row;columns:displayedColumns" class="example-element-row"></tr>
                </table></div>


    <!-- <div *ngIf="hasTransactions">
        <div fxFlex=20% fxFlexAlign="left" fxLayoutAlign="left stretch" fxFlexOffset="50px">Transaction Date</div>
        <div fxFlex=20% fxFlexAlign=" left " fxLayoutAlign="left stretch ">UPC</div>
                <div fxLayout=row fxLayout.xs="row" fxLayoutWrap fxLayoutGap="0.5%" fxLayoutWrap fxLayoutAlign="start stretch" style="background-color:lightblue">
            <div fxFlex=20% fxFlexAlign="left " fxLayoutAlign="left stretch ">Amount</div>
            <div fxFlex=20% fxFlexAlign="left " fxLayoutAlign="left stretch ">Item Description</div>
            <div fxFlex=20% fxFlexAlign="left " fxLayoutAlign="left stretch ">Store</div>
        </div>
        <div fxLayout=row fxLayout.xs="row " fxLayoutWrap fxLayoutGap="0.5% " fxLayoutWrap fxLayoutAlign="start stretch " *ngFor="let trans of budgetDetails.Transactions ">
            <div fxFlex=20% fxFlexAlign="left " fxLayoutAlign="left stretch " fxFlexOffset="50px ">
                {{trans.transdate|date:shortDate}}
            </div>
            <div fxFlex=20% fxFlexAlign="left " fxLayoutAlign="left stretch ">
                {{trans.upc}}
            </div>
            <div fxFlex=20% fxFlexAlign="left " fxLayoutAlign="left stretch ">
                {{trans.itemprice}}
            </div>
            <div fxFlex=20% fxFlexAlign="left " fxLayoutAlign="left stretch ">
                {{trans.itemdescription}}
            </div>
            <div fxFlex=20% fxFlexAlign="left " fxLayoutAlign="left stretch ">
                {{trans.store}}
            </div>
        </div>
    </div> -->



    <div style="height: 25px;">&nbsp;</div>
    <div class="transactioncontainter" *ngIf="!hasTransactions">
        <h3>There are no transactions for this budget.</h3>
    </div>
    <div fxLayout=row fxLayout.xs="row" fxLayoutWrap fxLayoutGap="0.5% " fxLayoutWrap fxLayoutAlign="start stretch ">
        <div fxFlex=80% fxLayoutAlign="end stretch">Budget Amount:</div>
        <div fxFlex=20% fxFlexAlign="left" fxLayoutAlign="start stretch">{{budgetDetails?.BudgetAmount|currency:'USD':'symbol':'1.2-2'}}</div>
    </div>
    <div fxLayout=row fxLayout.xs="row" fxLayoutWrap fxLayoutGap="0.5% " fxLayoutWrap fxLayoutAlign="start stretch ">
        <div fxFlex=80% fxLayoutAlign="end stretch">Transaction Total:</div>
        <div fxFlex=20% fxFlexAlign="left" fxLayoutAlign="start stretch">{{budgetDetails?.Transactions|itempricesum:'itemprice'|currency:'USD':'symbol':'1.2-2'}}</div>
    </div>
    <div fxLayout=row fxLayout.xs="row" fxLayoutWrap fxLayoutGap="0.5% " fxLayoutWrap fxLayoutAlign="start stretch ">
        <div fxFlex=80% fxLayoutAlign="end stretch">Remaining Budget Amount:</div>
        <div fxFlex=20% fxFlexAlign="left" fxLayoutAlign="start stretch">{{budgetDetails?.BudgetAmount-(budgetDetails?.Transactions|itempricesum:'itemprice')|currency:'USD':'symbol':'1.2-2'}}</div>
    </div>
</div>
<div style="height: 25px;">&nbsp;</div>
<div fxLayout=row fxLayout.xs="row" fxLayoutWrap fxLayoutGap="0.5% " fxLayoutWrap fxLayoutAlign="start stretch ">
    <div fxFlex=90% fxLayoutAlign="end stretch">
        <button *ngIf="show" mat-raised-button (click)="newTransaction('/newtransaction',budgetDetails?._id)" color="primary">Create New
      Transaction</button>&nbsp;
        <button mat-raised-button (click)="goBack()" color="primary">Back</button>&nbsp;
    </div>
</div>